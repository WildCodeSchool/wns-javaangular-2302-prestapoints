
<div class="container d-flex justify-content-center" *ngIf="isLoaded">
    <div class="container-details presta-p-7 presta-my-9 shadow">

        <span *ngIf="isFormulaireFalse" class = "mb-5 text-danger fw-bold"> Veuillez remplir tous les champs</span>
        
        <form [formGroup]="prestationFormBasic" *ngIf="pageNumber == 0"  (ngSubmit)="onSubmitBpNext(0)">
            <label for="category" class="form-label text-primary ">Catégories :</label>
            <select id = "category" class="form-select" aria-label="Default select example" formControlName="category">
                <option *ngFor="let categoryOption of categories; let i = index" [value]="categoryOption.id">{{categoryOption.name}}</option>
            </select>
            
            <div class="presta-mt-5 presta-mb-4" *ngFor="let field of formFieldsBasic">
                <label [for]="field.name" class="form-label text-primary ">{{ field.label }} :</label>
                <input type="{{ field.type }}" [id]="field.name" formControlName="{{ field.name }}" placeholder="{{ field.placeholder }}" class="form-control text-grey-text-light" />
                <div *ngIf="prestationFormBasic.get(field.name)?.errors && !prestationFormBasic.get(field.name)?.pristine"
                    class="error-msg m-3 text-danger">
                    <div [hidden]="!prestationFormBasic.get(field.name)?.errors?.['required']">
                        cette donnée est obligatoire.
                    </div>
                    <div [hidden]="!prestationFormBasic.controls[field.name].invalid">
                        {{ field.validationMessage }}
                    </div>
                </div>
            </div>
            <div class="d-flex justify-content-end presta-mt-4">
                <button class="btn btn-primary m-3" type="submit" >Suivant</button>
            </div> 
        </form>

        <form [formGroup]="prestationFormCharacteristic" *ngIf="pageNumber == 1" (ngSubmit)="onSubmitBpNext(1)">
            <div class="presta-mt-3 presta-mb-4" *ngFor="let field of formFieldsCharacteristic">
                <label [for]="field.name" class="form-label text-primary ">{{ field.label }} :</label>
                <input type="{{ field.type }}" [id]="field.name" formControlName="{{ field.name }}" placeholder="{{ field.placeholder }}" class="form-control text-grey-text-light" />
                <div *ngIf="prestationFormCharacteristic.get(field.name)?.errors && !prestationFormCharacteristic.get(field.name)?.pristine"
                    class="error-msg m-3 text-danger">
                    <div [hidden]="!prestationFormCharacteristic.get(field.name)?.errors?.['required']">
                        cette donnée est obligatoire.
                    </div>
                    <div [hidden]="!prestationFormCharacteristic.controls[field.name].invalid">
                        {{ field.validationMessage }}
                    </div>
                </div>
            </div>
            <div class="d-flex justify-content-end">
                <button class="btn btn-primary presta-m-3" (click)="onSubmitBpPrevious(1)">Précédent</button>
                <button class="btn btn-primary presta-m-3" type="submit">Suivant</button>
            </div>
        </form>

        <form [formGroup]="prestationFormDescription"  *ngIf="pageNumber == 2" (ngSubmit)="onSubmitBpNext(2)">
            <div class="presta-mt-3 presta-mb-4" *ngFor="let field of formFieldsDescription">
                <label [for]="field.name" class="form-label text-primary ">{{ field.label }} :</label>
                <input type="{{ field.type }}" [id]="field.name" formControlName="{{ field.name }}" placeholder="{{ field.placeholder }}" class="form-control text-grey-text-light" />
                <div *ngIf="prestationFormDescription.get(field.name)?.errors && !prestationFormDescription.get(field.name)?.pristine"
                    class="error-msg presta-m-3 text-danger">
                    <div [hidden]="!prestationFormDescription.get(field.name)?.errors?.['required']">
                        cette donnée est obligatoire.
                    </div>
                    <div [hidden]="!prestationFormDescription.controls[field.name].invalid">
                        {{ field.validationMessage }}
                    </div>
                </div>
            </div>
            <div class="d-flex justify-content-end">
                <button class="btn btn-primary presta-m-3" (click)="onSubmitBpPrevious(2)">Précédent</button>
                <button class="btn btn-primary presta-m-3" type="submit">Suivant</button>
            </div>
        </form>

        <form [formGroup]="prestationFormLocation"  *ngIf="pageNumber == 3" (ngSubmit)="onSubmitBpNext(3)">
            <div class="presta-mt-3 presta-mb-4" *ngFor="let field of formFieldsLocation">
                <label [for]="field.name" class="form-label  text-primary ">{{ field.label }} :</label>
                <input type="{{ field.type }}" [id]="field.name" formControlName="{{ field.name }}" placeholder="{{ field.placeholder }}" class="form-control text-grey-text-light" />
                <div *ngIf="prestationFormLocation.get(field.name)?.errors && !prestationFormLocation.get(field.name)?.pristine"
                    class="error-msg presta-m-3 text-danger">
                    <div [hidden]="!prestationFormLocation.get(field.name)?.errors?.['required']">
                        cette donnée est obligatoire.
                    </div>
                    <div [hidden]="!prestationFormLocation.controls[field.name].invalid">
                        {{ field.validationMessage }}
                    </div>
                </div>
            </div>
            <div class="d-flex justify-content-end">
                <button class="btn btn-primary presta-m-3" (click)="onSubmitBpPrevious(3)">Précédent</button>
                <button class="btn btn-primary presta-m-3" type="submit">Suivant</button>
            </div>
        </form>
        
        <form [formGroup]="prestationFormMedia"  *ngIf="pageNumber == 4" (ngSubmit)="onSubmit()">
            <div class="presta-mt-3 presta-mb-4">
                <label for="mediaVideo" class="form-label  text-primary "> Veuillez renseigner un lien video : </label>
                <input type="text" id="mediaVideo" formControlName="mediaVideo" placeholder="https://..." class="form-control text-grey-text-light" />
                <div *ngIf="prestationFormMedia.get('mediaVideo')?.errors && !prestationFormMedia.get('mediaVideo')?.pristine"
                    class="error-msg presta-m-3 text-danger">
                    <div [hidden]="!prestationFormMedia.get('mediaVideo')?.errors?.['required']">
                        cette donnée est obligatoire.
                    </div>
                    <div [hidden]="!prestationFormMedia.controls['mediaVideo'].invalid">
                        Le champs est limité à 255 caractères.
                    </div>
                </div>
            </div>
            <div class="d-flex justify-content-end">
                <button type="button" class="btn btn-primary presta-m-3" (click)="onSubmitBpPrevious(4)">Précédent</button>
                <button class="btn btn-primary presta-m-3" type="submit">Enregistrer</button>
            </div>
        </form>
        
    </div>
</div>